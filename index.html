<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Research Integrity Analyzer - Conflict of Interest Detection</title>

  <!-- PWA Meta -->
  <link rel="manifest" href="manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="RIA">
  <link rel="apple-touch-icon" href="resources/icon-512.png">

  <!-- External Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.12/typed.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.0/echarts.min.js"></script>
  <link href="https://unpkg.com/splitting@1.0.6/dist/splitting.css" rel="stylesheet">
  <script src="https://unpkg.com/splitting@1.0.6/dist/splitting.min.js"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --primary-navy: #1a2332; --warm-white: #fafafa; --accent-blue: #4a90e2;
      --safe-green: #27ae60; --caution-amber: #f39c12; --alert-red: #e74c3c;
      --neutral-gray: #7f8c8d; --light-gray: #ecf0f1; --dark-gray: #34495e;
    }
    body {
      font-family: 'Inter', sans-serif; background: var(--primary-navy);
      color: var(--warm-white); line-height: 1.6; overflow-x: hidden;
      min-height: 100vh;
    }
    #backgroundCanvas { position: fixed; top: 0; left: 0; z-index: -1; opacity: 0.3; }
    .container { max-width: 100%; margin: 0 auto; padding: 0 1rem; position: relative; z-index: 1; }
    .header { padding: 1.5rem 0; text-align: center; background: rgba(26,35,50,0.9);
      backdrop-filter: blur(10px); border-bottom: 1px solid rgba(74,144,226,0.2); }
    .app-title { font-family: 'Playfair Display', serif; font-size: 2rem; font-weight: 700;
      color: var(--accent-blue); margin-bottom: 0.5rem; }
    .app-subtitle { font-size: 0.9rem; color: var(--neutral-gray); font-weight: 300; }
    .main-content { padding: 2rem 0; min-height: calc(100vh - 140px); }
    .upload-section { background: rgba(255,255,255,0.05); border-radius: 16px; padding: 2rem;
      margin-bottom: 2rem; backdrop-filter: blur(10px); border: 1px solid rgba(74,144,226,0.1); }
    .section-title { font-family: 'Playfair Display', serif; font-size: 1.5rem;
      margin-bottom: 1rem; color: var(--warm-white); }
    .upload-area { border: 2px dashed var(--accent-blue); border-radius: 12px; padding: 3rem 2rem;
      text-align: center; cursor: pointer; transition: all 0.3s ease; margin-bottom: 1.5rem; }
    .upload-area:hover, .upload-area.drag-over { border-color: var(--safe-green);
      background: rgba(74,144,226,0.1); }
    .upload-icon { font-size: 3rem; margin-bottom: 1rem; display: block; }
    .upload-text { font-size: 1.1rem; margin-bottom: 0.5rem; }
    .upload-hint { font-size: 0.8rem; color: var(--neutral-gray); }
    .url-input-section { margin-bottom: 1.5rem; }
    .url-input { width: 100%; padding: 1rem; border: 1px solid var(--accent-blue);
      border-radius: 8px; background: rgba(255,255,255,0.1); color: var(--warm-white);
      font-size: 1rem; margin-bottom: 1rem; }
    .url-input::placeholder { color: var(--neutral-gray); }
    .analyze-btn { width: 100%; padding: 1rem 2rem; background: var(--accent-blue);
      color: white; border: none; border-radius: 8px; font-size: 1rem; font-weight: 600;
      cursor: pointer; transition: all 0.3s ease; }
    .analyze-btn:hover { background: #3a7bc8; transform: translateY(-2px); }
    .sample-papers { margin-top: 2rem; }
    .sample-papers h3 { font-size: 1.1rem; margin-bottom: 1rem; color: var(--warm-white); }
    .sample-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem; }
    .sample-paper { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 1.5rem;
      cursor: pointer; transition: all 0.3s ease; border: 1px solid rgba(74,144,226,0.1); }
    .sample-paper:hover { background: rgba(74,144,226,0.1); transform: translateY(-2px); }
    .sample-paper h4 { font-size: 1rem; margin-bottom: 0.5rem; color: var(--accent-blue); }
    .sample-paper p { font-size: 0.85rem; color: var(--neutral-gray); line-height: 1.4; }
    .analysis-progress { display: none; background: rgba(255,255,255,0.05); border-radius: 16px;
      padding: 2rem; margin: 2rem 0; text-align: center; border: 1px solid rgba(74,144,226,0.1); }
    .progress-bar { width: 100%; height: 8px; background: rgba(255,255,255,0.1);
      border-radius: 4px; overflow: hidden; margin: 1rem 0; }
    .progress-fill { height: 100%; background: var(--accent-blue); width: 0%;
      border-radius: 4px; transition: width 0.3s ease; }
    .progress-text { font-size: 0.9rem; color: var(--neutral-gray); margin-bottom: 0.5rem; }
    .progress-status { font-size: 1.1rem; font-weight: 500; color: var(--warm-white); }
    .analysis-results { display: none; margin-top: 2rem; }
    .risk-meter-section { background: rgba(255,255,255,0.05); border-radius: 16px;
      padding: 2rem; text-align: center; margin-bottom: 2rem;
      border: 1px solid rgba(74,144,226,0.1); }
    .risk-meter-container { position: relative; width: 200px; height: 200px; margin: 0 auto 1.5rem; }
    .risk-meter { width: 100%; height: 100%; transform: rotate(-90deg); }
    .risk-meter circle { fill: none; stroke-width: 12; }
    .risk-meter .background { stroke: rgba(255,255,255,0.1); }
    .risk-meter .progress { stroke: var(--accent-blue); stroke-linecap: round;
      stroke-dasharray: 0, 251; transition: stroke-dasharray 1.5s ease; }
    .risk-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      font-size: 1.2rem; font-weight: 600; color: var(--accent-blue); }
    .risk-description { font-size: 0.9rem; color: var(--neutral-gray); max-width: 400px; margin: 0 auto; }
    .category-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem; margin-top: 2rem; }
    .category-card { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 1.5rem;
      cursor: pointer; transition: all 0.3s ease; border: 1px solid rgba(74,144,226,0.1); opacity: 0; }
    .category-card:hover { background: rgba(74,144,226,0.1); transform: translateY(-2px); }
    .bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; background: rgba(26,35,50,0.95);
      backdrop-filter: blur(10px); border-top: 1px solid rgba(74,144,226,0.2); padding: 1rem 0; z-index: 100; }
    .nav-container { display: flex; justify-content: space-around; align-items: center; max-width: 400px; margin: 0 auto; }
    .nav-item { display: flex; flex-direction: column; align-items: center; text-decoration: none;
      color: var(--neutral-gray); transition: all 0.3s ease; padding: 0.5rem; }
    .nav-item.active, .nav-item:hover { color: var(--accent-blue); }
    .nav-icon { font-size: 1.2rem; margin-bottom: 0.25rem; }
    .nav-label { font-size: 0.7rem; font-weight: 500; }
  </style>
</head>

<body>
  <div id="backgroundCanvas"></div>
  <header class="header fade-in">
    <div class="container">
      <h1 class="app-title">Research Integrity Analyzer</h1>
      <p class="app-subtitle">Advanced Conflict of Interest Detection for Scientific Research</p>
    </div>
  </header>

  <main class="main-content">
    <div class="container">
      <section class="upload-section fade-in">
        <h2 class="section-title">Analyze Research Paper</h2>
        <div class="upload-area" id="uploadArea">
          <span class="upload-icon">üìÑ</span>
          <div class="upload-text">Drop PDF file here or click to upload</div>
          <div class="upload-hint">Supports PDF files up to 50MB</div>
        </div>
        <input type="file" id="fileInput" accept=".pdf">
        <div class="url-input-section">
          <input type="url" id="urlInput" class="url-input" placeholder="Or paste paper URL (e.g., PubMed, arXiv, journal website)">
          <button class="analyze-btn" id="analyzeBtn">Analyze from URL</button>
        </div>
        <div class="sample-papers">
          <h3>Try with Sample Papers</h3>
          <div class="sample-grid">
            <div class="sample-paper" data-paper-id="sample1">
              <h4>AI Ethics in Medical Research</h4>
              <p>High-risk case with significant industry funding and patent conflicts</p>
            </div>
            <div class="sample-paper" data-paper-id="sample2">
              <h4>Climate Change Impact Study</h4>
              <p>Medium-risk case with institutional funding dependencies</p>
            </div>
            <div class="sample-paper" data-paper-id="sample3">
              <h4>Neuroscience Research Review</h4>
              <p>Low-risk case with transparent disclosure practices</p>
            </div>
          </div>
        </div>
      </section>

      <section class="analysis-progress" id="analysisProgress">
        <div class="progress-text">Analyzing paper for potential conflicts...</div>
        <div class="progress-bar"><div class="progress-fill"></div></div>
        <div class="progress-status" id="progressStatus">Initializing analysis engine...</div>
      </section>

      <section class="analysis-results" id="analysisResults">
        <div class="risk-meter-section">
          <h2 class="section-title">Overall Risk Assessment</h2>
          <div class="risk-meter-container">
            <svg class="risk-meter" viewBox="0 0 84 84">
              <circle class="background" cx="42" cy="42" r="40"></circle>
              <circle class="progress" cx="42" cy="42" r="40" id="riskMeter"></circle>
            </svg>
            <div class="risk-text" id="riskText">CALCULATING...</div>
          </div>
          <p class="risk-description">
            Based on comprehensive analysis of financial relationships, institutional affiliations,
            author networks, and publication patterns.
          </p>
        </div>
        <div class="category-cards" id="categoryCards"></div>
      </section>
    </div>
  </main>

  <nav class="bottom-nav">
    <div class="nav-container">
      <a href="index.html" class="nav-item active">
        <span class="nav-icon">üîç</span><span class="nav-label">Analyze</span>
      </a>
      <a href="report.html" class="nav-item">
        <span class="nav-icon">üìä</span><span class="nav-label">Reports</span>
      </a>
      <a href="settings.html" class="nav-item">
        <span class="nav-icon">‚öôÔ∏è</span><span class="nav-label">Settings</span>
      </a>
    </div>
  </nav>

  <script src="main.js"></script>
  <script>
    let progressMessages = [
      "Scanning document structure...","Extracting author information...",
      "Analyzing funding sources...","Mapping institutional relationships...",
      "Examining citation patterns...","Calculating risk scores...",
      "Generating comprehensive report..."
    ];
    let messageIndex = 0;
    function updateProgressMessage() {
      const statusElement = document.getElementById('progressStatus');
      if (statusElement && messageIndex < progressMessages.length) {
        statusElement.textContent = progressMessages[messageIndex];
        messageIndex++;
        if (messageIndex < progressMessages.length) setTimeout(updateProgressMessage, 400);
      }
    }
    document.addEventListener('DOMContentLoaded', () => {
      Splitting();
      document.querySelectorAll('.sample-paper').forEach(paper => {
        paper.addEventListener('click', () => { updateProgressMessage(); });
      });
      document.getElementById('analyzeBtn').addEventListener('click', () => { updateProgressMessage(); });
    });
  </script>
</body>
</html>
